<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SVS7L9XYS7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-SVS7L9XYS7');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto AkshayaSelvakumar - Web3 Tools</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        .hero-section {
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://raw.githubusercontent.com/Akshayadeveloper/crypto-akshayaselvakumar/main/BKPic1.jpg');
            background-size: cover;
            padding: 120px 0;
        }
        .tool-card {
            transition: transform 0.3s;
            height: 100%;
        }
        .tool-card:hover {
            transform: translateY(-10px);
        }
        .gas-tier div {
            padding: 8px;
            border-radius: 5px;
            background: rgba(0,0,0,0.05);
        }
        .d-none { display: none; }
        #gasChart {
            max-height: 300px;
        }
        .premium-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(45deg, #ff6b6b, #ff9f43);
        }
        .partner-logo {
            transition: opacity 0.3s;
            max-width: 160px;
            height: auto;
        }
        .partner-logo:hover {
            opacity: 0.8;
        }
        .feature-locked {
            filter: blur(3px);
            pointer-events: none;
        }
        .upgrade-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
        }
        .pricing-plans .plan {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin: 10px;
        }
        .pricing-plans .plan h3 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        .pricing-plans .plan p {
            font-size: 16px;
            color: #666;
        }
        .pricing-plans .plan .price {
            font-size: 32px;
            font-weight: bold;
            color: #0d6efd;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <img src="https://raw.githubusercontent.com/Akshayadeveloper/crypto-akshayaselvakumar/main/logo-png.png" 
                     alt="Logo" width="40" height="40" class="d-inline-block align-text-top">
                Crypto Akshaya
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#tools">Tools</a></li>
                    <li class="nav-item"><a class="nav-link" href="#pricing">Pricing</a></li>
                    <li class="nav-item"><a class="nav-link" href="#donate">Donate</a></li>
                    <li class="nav-item"><a class="nav-link" href="#partners">Partners</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section text-white text-center">
        <div class="container">
            <h1 class="display-4 mb-4">Your Ultimate Web3 Toolkit</h1>
            <p class="lead">Free crypto tools for Ethereum users - Gas tracker, Tax calculator, Airdrop alerts</p>
            <a href="#pricing" class="btn btn-primary btn-lg">Upgrade to Pro</a>
        </div>
    </section>

    <!-- Pricing Section -->
    <section id="pricing" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-5">Pricing Plans</h2>
            <div class="row g-4 pricing-plans">
                <!-- Free Plan -->
                <div class="col-md-3">
                    <div class="plan">
                        <h3>Free</h3>
                        <p>Basic access to tools</p>
                        <p class="price">0 ETH</p>
                        <ul class="list-unstyled">
                            <li>Gas Fee Optimizer</li>
                            <li>Basic Tax Calculator</li>
                            <li>Airdrop Tracker</li>
                        </ul>
                    </div>
                </div>
                <!-- Pro Plan -->
                <div class="col-md-3">
                    <div class="plan">
                        <h3>Pro</h3>
                        <p>Advanced features</p>
                        <p class="price">0.05 ETH</p>
                        <ul class="list-unstyled">
                            <li>Detailed Tax Reports</li>
                            <li>Portfolio Tracker</li>
                            <li>Priority Support</li>
                        </ul>
                        <button class="btn btn-primary" onclick="upgradeToPro()">Upgrade</button>
                    </div>
                </div>
                <!-- Mid-Tier Plan -->
                <div class="col-md-3">
                    <div class="plan">
                        <h3>Advanced</h3>
                        <p>More features</p>
                        <p class="price">0.075 ETH</p>
                        <ul class="list-unstyled">
                            <li>All Pro Features</li>
                            <li>Advanced Analytics</li>
                            <li>Exclusive Airdrops</li>
                        </ul>
                        <button class="btn btn-primary" onclick="upgradeToAdvanced()">Upgrade</button>
                    </div>
                </div>
                <!-- Premium Plan -->
                <div class="col-md-3">
                    <div class="plan">
                        <h3>Premium</h3>
                        <p>All features included</p>
                        <p class="price">0.2 ETH</p>
                        <ul class="list-unstyled">
                            <li>NFT Valuation Tool</li>
                            <li>Advanced Analytics</li>
                            <li>Exclusive Airdrops</li>
                        </ul>
                        <button class="btn btn-primary" onclick="upgradeToPremium()">Upgrade</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Tools Section -->
    <section id="tools" class="py-5">
        <div class="container">
            <h2 class="text-center mb-5">Featured Tools</h2>
            <div class="row g-4">
                <!-- Gas Fee Optimizer -->
                <div class="col-md-4">
                    <div class="card tool-card">
                        <div class="card-body">
                            <h5 class="card-title">🚀 Gas Fee Optimizer</h5>
                            <div class="gas-tier mb-3">
                                <div class="low-tier">
                                    <span class="badge bg-success">Low</span>
                                    <span id="gasLow">-</span> gwei
                                </div>
                                <div class="avg-tier mt-2">
                                    <span class="badge bg-warning">Avg</span>
                                    <span id="gasAvg">-</span> gwei
                                </div>
                                <div class="high-tier mt-2">
                                    <span class="badge bg-danger">High</span>
                                    <span id="gasHigh">-</span> gwei
                                </div>
                            </div>
                            <canvas id="gasChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Tax Calculator -->
                <div class="col-md-4">
                    <div class="card tool-card">
                        <div class="card-body">
                            <span class="badge premium-badge">PRO</span>
                            <h5 class="card-title">💸 Tax Calculator</h5>
                            <div class="mb-3">
                                <input type="text" id="walletAddress" class="form-control" placeholder="Enter ETH Address">
                                <button onclick="calculateTax()" class="btn btn-primary mt-2">Calculate</button>
                            </div>
                            <div id="taxResult" class="d-none">
                                <p>Taxable Gains: <span id="taxAmount">0</span> ETH</p>
                                <p>Tax Owed (20%): <span id="taxOwed">0</span> ETH</p>
                                <button class="btn btn-success" 
                                        onclick="showPremiumOffer()">
                                    Download Pro Report (0.05 ETH)
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Airdrop Tracker -->
                <div class="col-md-4">
                    <div class="card tool-card">
                        <div class="card-body">
                            <h5 class="card-title">🎁 Airdrop Tracker</h5>
                            <p class="card-text">Latest crypto airdrop opportunities</p>
                        </div>
                    </div>
                </div>

                <!-- Portfolio Tracker (Pro Feature) -->
                <div class="col-md-4">
                    <div class="card tool-card pro-feature feature-locked">
                        <div class="card-body">
                            <h5 class="card-title">📊 Portfolio Tracker</h5>
                            <div class="mb-3">
                                <input type="text" id="portfolioWalletAddress" class="form-control" placeholder="Enter ETH Address">
                                <button onclick="trackPortfolio()" class="btn btn-primary mt-2">Track Portfolio</button>
                            </div>
                            <div id="portfolioContainer"></div>
                        </div>
                    </div>
                </div>

                <!-- NFT Tracker (Premium Feature) -->
                <div class="col-md-4">
                    <div class="card tool-card premium-feature feature-locked">
                        <div class="card-body">
                            <h5 class="card-title">🖼️ NFT Tracker</h5>
                            <div class="mb-3">
                                <input type="text" id="nftWalletAddress" class="form-control" placeholder="Enter ETH Address">
                                <button onclick="trackNFTs()" class="btn btn-primary mt-2">Track NFTs</button>
                            </div>
                            <div id="nftContainer" class="row"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Donate Section -->
    <section id="donate" class="py-5 bg-light">
        <div class="container text-center">
            <h2 class="mb-4">Support Our Development</h2>
            <button class="btn btn-primary btn-lg" 
                    onclick="window.open('https://nowpayments.io/donation/CryptoAkshaya', '_blank')">
                💰 Donate ETH
            </button>
        </div>
    </section>

    <!-- Partners Section -->
    <section id="partners" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-5">Exchange Partners</h2>
            <div class="row justify-content-center g-4">
                <div class="col-auto text-center">
                    <a href="https://coinstats.app/refer/CoinStatsAffiliate?utm_source=CoinStatsAffiliate&utm_medium=aff&utm_campaign=inf&utm_id=CoinStatsAffiliate&fpr=akshaya-31" target="_blank">
                        <img src="https://logovectordl.com/wp-content/uploads/2021/11/coinstats-logo-vector.png" 
                             class="partner-logo" 
                             alt="Coinstats.com"
                             style="width: 200px;">
                    </a>
                </div>
                <div class="col-auto text-center">
                    <a href="https://www.kucoin.com/r/af/r8JXZ4A" target="_blank">
                        <img src="https://www.liblogo.com/img-logo/max/ku2767k895-kucoin-token-logo-kucoin-.png"
                             class="partner-logo" 
                             alt="KuCoin"
                             style="width: 160px;">
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Pro Updates Form -->
    <section class="bg-dark text-white py-4">
        <div class="container">
            <h5 class="text-center mb-3">Get Pro Tool Updates</h5>
            <form action="https://formspree.io/f/xeooydzk" method="POST" class="row g-3 justify-content-center">
                <div class="col-md-4">
                    <input type="email" name="email" class="form-control" placeholder="Enter email" required>
                </div>
                <div class="col-md-2">
                    <button class="btn btn-outline-light w-100" type="submit">Subscribe</button>
                </div>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-8">
                    <p class="small text-muted mb-3">
                        🛈 Contains affiliate links. Partners pay commissions at no extra cost. 
                        Cryptocurrency trading may have tax implications in your jurisdiction.
                    </p>
                </div>
                <div class="col-md-4 text-end">
                    <p>&copy; 2025 Crypto AkshayaSelvakumar</p>
                    <p>Hosted on GitHub Pages</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // NowPayments Configuration
        const NOWPAYMENTS_PRO_PRODUCT_LINK = "https://nowpayments.io/payment/?iid=5029629963";
        const NOWPAYMENTS_ADVANCED_PRODUCT_LINK = "https://nowpayments.io/payment/?iid=5129517320";
        const NOWPAYMENTS_PREMIUM_PRODUCT_LINK = "https://nowpayments.io/payment/?iid=5537991080";
        const ETHERSCAN_API_KEY = "UR4VBGYHPUBPQSEMUEZ4GJI37U7SDXUNJ8";

        // Upgrade Functions
        function upgradeToPro() {
            const confirmed = confirm("Upgrade to Pro for 0.05 ETH?");
            if (confirmed) {
                window.location.href = NOWPAYMENTS_PRO_PRODUCT_LINK;
                gtag('event', 'pro_upgrade_click', {
                    'event_category': 'monetization'
                });
            }
        }

        function upgradeToAdvanced() {
            const confirmed = confirm("Upgrade to Advanced for 0.075 ETH?");
            if (confirmed) {
                window.location.href = NOWPAYMENTS_ADVANCED_PRODUCT_LINK;
                gtag('event', 'advanced_upgrade_click', {
                    'event_category': 'monetization'
                });
            }
        }

        function upgradeToPremium() {
            const confirmed = confirm("Upgrade to Premium for 0.2 ETH?");
            if (confirmed) {
                window.location.href = NOWPAYMENTS_PREMIUM_PRODUCT_LINK;
                gtag('event', 'premium_upgrade_click', {
                    'event_category': 'monetization'
                });
            }
        }

        // Token Verification Logic
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const token = urlParams.get('token');

            if (token) {
                // Verify the token and unlock features
                verifyToken(token).then(plan => {
                    if (plan === 'pro') {
                        unlockProFeatures();
                    } else if (plan === 'advanced') {
                        unlockAdvancedFeatures();
                    } else if (plan === 'premium') {
                        unlockPremiumFeatures();
                    }
                });
            }
        });

        async function verifyToken(token) {
            try {
                // Fetch the token's validity and associated plan from Pipedream
                const response = await fetch(`https://eoothhsaulitkx5.m.pipedream.net/verify?token=${token}`);
                const data = await response.json();

                if (data.valid) {
                    return data.plan; // e.g., 'pro', 'advanced', 'premium'
                } else {
                    return null;
                }
            } catch (error) {
                console.error('Token verification failed:', error);
                return null;
            }
        }

        function unlockProFeatures() {
            // Unlock Pro features
            document.querySelectorAll('.pro-feature').forEach(el => {
                el.classList.remove('feature-locked');
                el.querySelector('.upgrade-button')?.remove();
            });
        }

        function unlockAdvancedFeatures() {
            unlockProFeatures();
            // Unlock Advanced features
            document.querySelectorAll('.advanced-feature').forEach(el => {
                el.classList.remove('feature-locked');
                el.querySelector('.upgrade-button')?.remove();
            });
        }

        function unlockPremiumFeatures() {
            unlockAdvancedFeatures();
            // Unlock Premium features
            document.querySelectorAll('.premium-feature').forEach(el => {
                el.classList.remove('feature-locked');
                el.querySelector('.upgrade-button')?.remove();
            });
        }

        // Gas Fee Optimizer
        const gasChart = new Chart(document.getElementById('gasChart'), {
            type: 'line',
            data: {
                labels: Array.from({ length: 24 }, (_, i) => `${i}h`),
                datasets: [{
                    label: 'Gas Price (gwei)',
                    data: [],
                    borderColor: '#0d6efd',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } }
            }
        });

        async function fetchGasPrices() {
            try {
                const response = await fetch(
                    `https://api.etherscan.io/api?module=gastracker&action=gasoracle&apikey=${ETHERSCAN_API_KEY}`
                );
                const data = await response.json();

                if (data.status === "1") {
                    document.getElementById("gasLow").textContent = data.result.SafeGasPrice;
                    document.getElementById("gasAvg").textContent = data.result.ProposeGasPrice;
                    document.getElementById("gasHigh").textContent = data.result.FastGasPrice;

                    gasChart.data.datasets[0].data = Array.from({ length: 24 }, () =>
                        Math.floor(Math.random() * 50 + 20)
                    );
                    gasChart.update();

                    gtag('event', 'gas_tool_used', {
                        'event_category': 'tool_usage',
                        'gas_low': data.result.SafeGasPrice,
                        'gas_avg': data.result.ProposeGasPrice,
                        'gas_high': data.result.FastGasPrice
                    });
                }
            } catch (error) {
                console.error("Gas price error:", error);
            }
        }

        // Tax Calculator using Etherscan
        window.calculateTax = async () => {
            const address = document.getElementById("walletAddress").value.trim();
            if (!address) return alert("Please enter a wallet address");

            try {
                const response = await fetch(
                    `https://api.etherscan.io/api?module=account&action=txlist&address=${address}&startblock=0&endblock=99999999&sort=desc&apikey=${ETHERSCAN_API_KEY}`
                );
                const data = await response.json();

                if (data.status !== "1" || !data.result.length) {
                    return alert("No transactions found for this address");
                }

                let totalGains = data.result.reduce((acc, tx) => {
                    if (tx.from.toLowerCase() === address.toLowerCase()) {
                        return acc + (parseInt(tx.value) * 1e-18);
                    }
                    return acc;
                }, 0);

                const taxOwed = totalGains * 0.2;
                document.getElementById("taxAmount").textContent = totalGains.toFixed(4);
                document.getElementById("taxOwed").textContent = taxOwed.toFixed(4);
                document.getElementById("taxResult").classList.remove("d-none");

                gtag('event', 'tax_calculated', {
                    'event_category': 'tool_usage',
                    'transactions_count': data.result.length,
                    'tax_owed': taxOwed
                });
            } catch (error) {
                alert("Error fetching transactions");
                console.error(error);
            }
        };

        // NFT Tracker Functionality with Moralis API
        async function fetchNFTs(walletAddress) {
            try {
                const response = await fetch(
                    `https://deep-index.moralis.io/api/v2/${walletAddress}/nft?chain=eth&format=decimal`,
                    {
                        headers: {
                            'X-API-Key': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJub25jZSI6ImMyMmFjYzAzLTBkMzItNDRmNS05ZjE5LTIxMWMyNTAwODQzNCIsIm9yZ0lkIjoiNDM3MzU5IiwidXNlcklkIjoiNDQ5OTM5IiwidHlwZUlkIjoiZjhjNmY5NTItMzA0OS00ZTBmLTk0MGUtOTdkNDRhNTg4ODM1IiwidHlwZSI6IlBST0pFQ1QiLCJpYXQiOjE3NDI1MzkwNjAsImV4cCI6NDg5ODI5OTA2MH0.yapu-vrlVsekUi6IlYSt1NCbgIlTyVBnI7zPKRxRyS0' // Your Moralis API Key
                        }
                    }
                );
                const data = await response.json();
                return data.result; // Returns an array of NFTs
            } catch (error) {
                console.error("Error fetching NFTs:", error);
                return [];
            }
        }

        function displayNFTs(nfts) {
            const nftContainer = document.getElementById("nftContainer");
            nftContainer.innerHTML = ""; // Clear previous results

            if (nfts.length === 0) {
                nftContainer.innerHTML = "<p>No NFTs found for this wallet address.</p>";
                return;
            }

            nfts.forEach(nft => {
                // Extract metadata (if available)
                const metadata = nft.metadata ? JSON.parse(nft.metadata) : null;
                const imageUrl = metadata?.image || 'https://via.placeholder.com/150';
                const name = metadata?.name || "Unnamed NFT";
                const description = metadata?.description || "No description available.";

                const nftCard = `
                    <div class="col-md-4 mb-4">
                        <div class="card">
                            <img src="${imageUrl}" class="card-img-top" alt="${name}">
                            <div class="card-body">
                                <h5 class="card-title">${name}</h5>
                                <p class="card-text">${description}</p>
                                <a href="https://opensea.io/assets/ethereum/${nft.token_address}/${nft.token_id}" target="_blank" class="btn btn-primary">View on OpenSea</a>
                            </div>
                        </div>
                    </div>
                `;
                nftContainer.innerHTML += nftCard;
            });
        }

        window.trackNFTs = async () => {
            const walletAddress = document.getElementById("nftWalletAddress").value.trim();
            if (!walletAddress) return alert("Please enter a wallet address");

            const nfts = await fetchNFTs(walletAddress);
            displayNFTs(nfts);
        };

        // Portfolio Tracker Functionality
        async function fetchPortfolio(walletAddress) {
            try {
                const response = await fetch(
                    `https://api.etherscan.io/api?module=account&action=balance&address=${walletAddress}&tag=latest&apikey=${ETHERSCAN_API_KEY}`
                );
                const data = await response.json();

                if (data.status === "1") {
                    const balance = (data.result / 1e18).toFixed(4); // Convert wei to ETH
                    return { balance };
                } else {
                    return { balance: 0 };
                }
            } catch (error) {
                console.error("Error fetching portfolio:", error);
                return { balance: 0 };
            }
        }

        function displayPortfolio(portfolio) {
            const portfolioContainer = document.getElementById("portfolioContainer");
            portfolioContainer.innerHTML = `
                <p>ETH Balance: <strong>${portfolio.balance} ETH</strong></p>
            `;
        }

        window.trackPortfolio = async () => {
            const walletAddress = document.getElementById("portfolioWalletAddress").value.trim();
            if (!walletAddress) return alert("Please enter a wallet address");

            const portfolio = await fetchPortfolio(walletAddress);
            displayPortfolio(portfolio);
        };

        // PDF Generation
        window.generatePDF = () => {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.text("Crypto Tax Report", 10, 10);
            doc.text(`Wallet Address: ${document.getElementById("walletAddress").value}`, 10, 20);
            doc.text(`Taxable Gains: ${document.getElementById("taxAmount").textContent} ETH`, 10, 30);
            doc.text(`Tax Owed (20%): ${document.getElementById("taxOwed").textContent} ETH`, 10, 40);
            doc.save("tax-report.pdf");

            gtag('event', 'pdf_download', {
                'event_category': 'pro_feature',
                'event_label': urlParams.has('payment_success') ? 'pro_version' : 'free_version'
            });
        };

        // Initialize gas prices
        fetchGasPrices();
        setInterval(fetchGasPrices, 30000);
    </script>
</body>
</html>
